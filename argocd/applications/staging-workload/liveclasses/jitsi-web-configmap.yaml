apiVersion: v1
kind: ConfigMap
metadata:
  name: jitsi-web-config
  namespace: liveclasses
data:
  config.js: |
    var config = {
        // Video quality settings
        resolution: 1080,
        constraints: {
            video: {
                height: {
                    ideal: 1080,
                    max: 1080,
                    min: 360
                }
            }
        },
        videoQuality: {
            maxBitratesVideo: {
                H264: 2500000,
                VP8: 2500000,
                VP9: 2500000
            },
            preferredCodec: 'VP8',
            minHeightForQualityLvl: {
                360: 'low',
                720: 'standard',
                1080: 'high'
            }
        },
        disableSimulcast: false,
        enableLayerSuspension: true,
        enableNoAudioDetection: true,
        enableNoisyMicDetection: true,
        startWithAudioMuted: false,
        startWithVideoMuted: false,
        
        // Camera and video settings - ensure camera loads
        startVideoMuted: false,
        startAudioMuted: false,
        startAudioOnly: false,
        startSilent: false,
        disableAGC: false,
        disableAP: false,
        
        // Connection settings - use BOSH instead of WebSocket
        hosts: {
            domain: 'streaming-stg.talentos.darey.io',
            muc: 'conference.streaming-stg.talentos.darey.io'
        },
        bosh: '/http-bind',
        constraints: {
            video: {
                height: { ideal: 720, max: 720, min: 180 },
                width: { ideal: 1280, max: 1280, min: 320 }
            }
        },
        
        // Prejoin page customization - enabled for camera init but hidden with CSS
        prejoinConfig: {
            enabled: false,
            hideDisplayName: true,
            hideExtraJoinButtons: ['no-audio', 'by-phone', 'dial-in', 'dial-out']
        },
        
        // Toolbar customization
        toolbarButtons: [
            'microphone', 'camera', 'desktop', 'chat',
            'raisehand', 'participants-pane', 'tileview',
            'hangup'
        ],
        
        // Video layout settings
        videoLayout: {
            fit: 'both'
        },
        
        // UI elements to hide
        disableProfile: true,
        hideConferenceSubject: false,
        hideConferenceTimer: false,
        hideParticipantsStats: true,
        
        // Branding
        defaultLocalDisplayName: 'me',
        defaultRemoteDisplayName: 'Student',
        
        // Prejoin settings - enabled for camera init but hidden with CSS
        prejoinPageEnabled: false,
        enableWelcomePage: false,
        enableClosePage: false,
        
        // Auto-join settings - camera and audio enabled by default
        startWithAudioMuted: 0,
        startWithVideoMuted: 0,
        startVideoMuted: 0,
        startAudioMuted: 0,
        
        // Force camera initialization
        enableLayerSuspension: false,
        disableSimulcast: true,
        
        // Additional camera settings for auto-start
        startAudioOnly: false,
        startSilent: false,
        disableAGC: false,
        disableAP: false,
        
        // Auto-enable tile view for better camera display
        startWithTileView: true,
        startScreenSharing: false,
        
        // Layout configuration
        filmstripOnly: false,
        hideFilmstrip: false,
        filmstripMaxHeight: 120,
        
        // Performance optimizations
        enableNoAudioDetection: true,
        enableNoisyMicDetection: true,
        enableTalkWhileMuted: false,
        
        // Custom CSS loading
        customCSS: [
            '/css/custom.css'
        ],
        
        // Auto-enable tile view script and move sidebar
        customScripts: [
            'auto-tileview.js',
            'move-sidebar.js'
        ]
    };

  interface_config.js: |
    var interfaceConfig = {
        APP_NAME: 'Darey.io Live Classes',
        BRAND_WATERMARK_LINK: '',
        CLOSE_PAGE_GUEST_HINT: false,
        DEFAULT_BACKGROUND: '#474747',
        DEFAULT_LOCAL_DISPLAY_NAME: 'me',
        DEFAULT_REMOTE_DISPLAY_NAME: 'Student',
        DISABLE_DOMINANT_SPEAKER_INDICATOR: false,
        DISABLE_FOCUS_INDICATOR: false,
        DISABLE_JOIN_LEAVE_NOTIFICATIONS: false,
        DISABLE_PRESENCE_STATUS: false,
        DISABLE_RINGING: false,
        DISPLAY_WELCOME_FOOTER: false,
        DISPLAY_WELCOME_PAGE_ADDITIONAL_CARD: false,
        DISPLAY_WELCOME_PAGE_CONTENT: false,
        DISPLAY_WELCOME_PAGE_TOOLBAR_ADDITIONAL_CONTENT: false,
        ENABLE_DIAL_OUT: false,
        ENABLE_FEEDBACK_ANIMATION: false,
        FILM_STRIP_MAX_HEIGHT: 120,
        GENERATE_ROOMNAMES_ON_WELCOME_PAGE: false,
        HIDE_INVITE_MORE_HEADER: true,
        JITSI_WATERMARK_LINK: '',
        LANG_DETECTION: true,
        MOBILE_APP_PROMO: false,
        OPTIMAL_BROWSERS: ['chrome', 'chromium', 'firefox', 'safari', 'edge'],
        POLICY_LOGO: null,
        PROVIDER_NAME: 'Darey.io',
        RECENT_LIST_ENABLED: false,
        REMOTE_THUMBNAIL_RATIO: 1,
        SETTINGS_SECTIONS: ['devices', 'language'],
        SHOW_BRAND_WATERMARK: false,
        SHOW_CHROME_EXTENSION_BANNER: false,
        SHOW_DEEP_LINKING_IMAGE: false,
        SHOW_JITSI_WATERMARK: false,
        SHOW_POWERED_BY: false,
        SHOW_PROMOTIONAL_CLOSE_PAGE: false,
        SHOW_WATERMARK_FOR_GUESTS: false,
        SUPPORT_URL: '',
        TOOLBAR_ALWAYS_VISIBLE: false,
        TOOLBAR_BUTTONS: [
            'microphone', 'camera', 'closedcaptions', 'desktop',
            'fullscreen', 'fodeviceselection', 'hangup', 'chat',
            'recording', 'livestreaming', 'raisehand',
            'participants-pane', 'settings', 'shareaudio',
            'stats', 'tileview', 'videobackgroundblur', 'download',
            'help', 'mute-everyone'
        ],
        TOOLBAR_TIMEOUT: 4000,
        UNSUPPORTED_BROWSERS: [],
        VERTICAL_FILMSTRIP: true,
        VIDEO_LAYOUT_FIT: 'both',
        VIDEO_QUALITY_LABEL_DISABLED: false,
        PREJOIN_ALWAYS_VISIBLE: false,
        FILM_STRIP_MAX_HEIGHT: 120,
        DEFAULT_LOCAL_DISPLAY_NAME: 'me',
        DEFAULT_REMOTE_DISPLAY_NAME: 'Student'
    };

